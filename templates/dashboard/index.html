{% extends "base.html" %}
{% load staticfiles %}

{% block extra_head %}
    <link href="{% static "widgets/css/lightbox_form.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "widgets/css/team_create_form.css" %}" rel="stylesheet" type="text/css">
    
{% endblock %}


{% block breadcrumb %}
    <li class="active">Dashboard</li>
{% endblock %}

{% block main %}

    <div class="container-fluid">

        <div id="addteam-div" class="row">
            {% if teams %}
                
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    {% for team in teams %}
                        <div class="team-box col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div id="teambox-title"  class="col-lg-12">
                                <a href="{% url 'team_info' team.id %}"><h5>{{ team.name }}</h5></a>
                            </div>
                            <div class="col-lg-12 noPadMar">
                                <p>{{ team.description }}</p>
                            </div> 
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 noPadMar">
                                {% for service in team.service.all %}
                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 noPadMar">
                                        <img 
                                            src="{% static 'furst/img/team/' %}{{ service.name|lower }}-sm.png" 
                                            class="img-responsive">
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </div>

                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                {% if services_list %}
                    <table class="table table-hover">
                        <caption>Service List</caption>
                        <tbody>
                            {% for service, length in services_list.items %}
                            <tr>
                                <td>{{ service.name }}: {{ service.team_name }}</td>
                                <td><span class="badge">{{ length }}</span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
                </div>

            {% else %}

                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    Hey, you don't have any teams!  Add one to get started!
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <a href="javascript:void(0)" onclick="App.CreateTeamForm.open()">
                        <img src="{% static 'furst/img/addbox.png' %}" class="img-responsive">
                    </a>
                    <h4 class="text-center text-muted">Add a Team</h2>
                </div>

            {% endif %}
        </div>

    </div>

    {% include 'widgets/team_create_form.html' %}

{% endblock %}


{% block script %}
    <script src="{% url 'dashboard:api' %}"></script>         
    <script src="{% static 'widgets/lightbox_form.js' %}"></script>
    <script src="{% static 'widgets/team_create_form.js' %}"></script>
{% endblock %}